<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Other | Notebook</title>
    <meta name="generator" content="VuePress 1.5.0">
    <link rel="icon" href="/notebook/logo.png">
    <link rel="manifest" href="/notebook/manifest.json">
    <link rel="apple-touch-icon" href="/notebook/icons/apple-touch-icon-152x152.png">
    <link rel="mask-icon" href="/notebook/icons/safari-pinned-tab.svg" color="#3eaf7c">
    <meta name="description" content="Notebook,笔记">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/icons/msapplication-icon-144x144.png">
    <meta name="msapplication-TileColor" content="#000000">
    <link rel="preload" href="/notebook/assets/css/0.styles.30a3181b.css" as="style"><link rel="preload" href="/notebook/assets/js/app.4ef68408.js" as="script"><link rel="preload" href="/notebook/assets/js/2.f546fd41.js" as="script"><link rel="preload" href="/notebook/assets/js/14.3c282a52.js" as="script"><link rel="preload" href="/notebook/assets/js/3.5194bc92.js" as="script"><link rel="prefetch" href="/notebook/assets/js/10.a3ac9f5f.js"><link rel="prefetch" href="/notebook/assets/js/11.dbc06298.js"><link rel="prefetch" href="/notebook/assets/js/12.902b60dd.js"><link rel="prefetch" href="/notebook/assets/js/13.bf7f6b29.js"><link rel="prefetch" href="/notebook/assets/js/15.5eff2cbe.js"><link rel="prefetch" href="/notebook/assets/js/16.8c5e9eda.js"><link rel="prefetch" href="/notebook/assets/js/17.cb26da37.js"><link rel="prefetch" href="/notebook/assets/js/18.a42eef60.js"><link rel="prefetch" href="/notebook/assets/js/19.ff9bfae5.js"><link rel="prefetch" href="/notebook/assets/js/4.e3e1e6db.js"><link rel="prefetch" href="/notebook/assets/js/5.ca4f70c0.js"><link rel="prefetch" href="/notebook/assets/js/6.73bbcf8d.js"><link rel="prefetch" href="/notebook/assets/js/7.f32cee4a.js"><link rel="prefetch" href="/notebook/assets/js/8.b9a58496.js"><link rel="prefetch" href="/notebook/assets/js/9.3bd47329.js">
    <link rel="stylesheet" href="/notebook/assets/css/0.styles.30a3181b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/notebook/" class="home-link router-link-active"><!----> <span class="site-name">Notebook</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/notebook/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/notebook/vue/" class="nav-link">
  Vue
</a></div><div class="nav-item"><a href="/notebook/react/" class="nav-link">
  React
</a></div><div class="nav-item"><a href="/notebook/js/" class="nav-link">
  JavaScript
</a></div><div class="nav-item"><a href="/notebook/typescript/" class="nav-link">
  TypeScript
</a></div><div class="nav-item"><a href="/notebook/html/" class="nav-link">
  Html
</a></div><div class="nav-item"><a href="/notebook/css/" class="nav-link">
  Css
</a></div><div class="nav-item"><a href="/notebook/interview/" class="nav-link">
  Interview
</a></div><div class="nav-item"><a href="/notebook/other/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Other
</a></div><div class="nav-item"><a href="/notebook/components/" class="nav-link">
  组件
</a></div><div class="nav-item"><a href="https://github.com/BurNing1993/notebook" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/notebook/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/notebook/vue/" class="nav-link">
  Vue
</a></div><div class="nav-item"><a href="/notebook/react/" class="nav-link">
  React
</a></div><div class="nav-item"><a href="/notebook/js/" class="nav-link">
  JavaScript
</a></div><div class="nav-item"><a href="/notebook/typescript/" class="nav-link">
  TypeScript
</a></div><div class="nav-item"><a href="/notebook/html/" class="nav-link">
  Html
</a></div><div class="nav-item"><a href="/notebook/css/" class="nav-link">
  Css
</a></div><div class="nav-item"><a href="/notebook/interview/" class="nav-link">
  Interview
</a></div><div class="nav-item"><a href="/notebook/other/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Other
</a></div><div class="nav-item"><a href="/notebook/components/" class="nav-link">
  组件
</a></div><div class="nav-item"><a href="https://github.com/BurNing1993/notebook" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Other</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/notebook/other/#代码规范" class="sidebar-link">代码规范</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notebook/other/#editorconfig" class="sidebar-link">EditorConfig</a></li><li class="sidebar-sub-header"><a href="/notebook/other/#prettier" class="sidebar-link">Prettier</a></li><li class="sidebar-sub-header"><a href="/notebook/other/#eslint" class="sidebar-link">ESLint</a></li><li class="sidebar-sub-header"><a href="/notebook/other/#prettier-和-eslint-的冲突" class="sidebar-link">Prettier 和 ESLint 的冲突</a></li><li class="sidebar-sub-header"><a href="/notebook/other/#husky-lint-staged" class="sidebar-link">husky &amp; lint-staged</a></li><li class="sidebar-sub-header"><a href="/notebook/other/#lint-staged" class="sidebar-link">lint-staged</a></li></ul></li><li><a href="/notebook/other/#git-提交规范" class="sidebar-link">Git 提交规范</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notebook/other/#angular-commit-message-格式规范" class="sidebar-link">Angular commit message 格式规范</a></li><li class="sidebar-sub-header"><a href="/notebook/other/#commitizen" class="sidebar-link">Commitizen</a></li><li class="sidebar-sub-header"><a href="/notebook/other/#集成-commitlint-验证提交规范" class="sidebar-link">集成 commitlint 验证提交规范</a></li></ul></li><li><a href="/notebook/other/#vscode" class="sidebar-link">VSCode</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notebook/other/#jsdoc" class="sidebar-link">JSDoc</a></li></ul></li><li><a href="/notebook/other/#eslint-配置" class="sidebar-link">ESLINT 配置</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notebook/other/#react-hooks-eslint" class="sidebar-link">React hooks ESlint</a></li></ul></li><li><a href="/notebook/other/#发布-npm-包" class="sidebar-link">发布 NPM 包</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notebook/other/#登录" class="sidebar-link">登录</a></li></ul></li><li><a href="/notebook/other/#nginx" class="sidebar-link">Nginx</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/notebook/other/#docker" class="sidebar-link">Docker</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notebook/other/#安装" class="sidebar-link">安装</a></li><li class="sidebar-sub-header"><a href="/notebook/other/#常用命令" class="sidebar-link">常用命令</a></li><li class="sidebar-sub-header"><a href="/notebook/other/#dockerfile" class="sidebar-link">Dockerfile</a></li><li class="sidebar-sub-header"><a href="/notebook/other/#网络" class="sidebar-link">网络</a></li></ul></li><li><a href="/notebook/other/#github-gh-page-action" class="sidebar-link">Github gh-page Action</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notebook/other/#github-gh-pages-deploy" class="sidebar-link">Github gh-pages deploy</a></li></ul></li><li><a href="/notebook/other/#shell" class="sidebar-link">Shell</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/notebook/other/#模拟数据" class="sidebar-link">模拟数据</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notebook/other/#mock-js-json-server" class="sidebar-link">Mock.js + json-server</a></li></ul></li><li><a href="/notebook/other/#nginx-缓存配置" class="sidebar-link">Nginx 缓存配置</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notebook/other/#启用缓存" class="sidebar-link">启用缓存</a></li><li class="sidebar-sub-header"><a href="/notebook/other/#禁用缓存" class="sidebar-link">禁用缓存</a></li></ul></li><li><a href="/notebook/other/#springbootapp" class="sidebar-link">SpringBootApp</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/notebook/other/#vercel-proxy" class="sidebar-link">vercel proxy</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/notebook/other/#robots-txt" class="sidebar-link">robots.txt</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="other"><a href="#other" class="header-anchor">#</a> Other</h1> <h2 id="代码规范"><a href="#代码规范" class="header-anchor">#</a> 代码规范</h2> <h3 id="editorconfig"><a href="#editorconfig" class="header-anchor">#</a> EditorConfig</h3> <blockquote><p><a href="https://editorconfig.org/" target="_blank" rel="noopener noreferrer">https://editorconfig.org/<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote> <ul><li>.editorconfig</li></ul> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># Editor configuration, see http://editorconfig.org</span>

<span class="token comment"># 表示是最顶层的 EditorConfig 配置文件</span>
root <span class="token operator">=</span> <span class="token boolean">true</span>

<span class="token punctuation">[</span>*<span class="token punctuation">]</span> <span class="token comment"># 表示所有文件适用</span>
charset <span class="token operator">=</span> utf-8 <span class="token comment"># 设置文件字符集为 utf-8</span>
indent_style <span class="token operator">=</span> space <span class="token comment"># 缩进风格（tab | space）</span>
indent_size <span class="token operator">=</span> <span class="token number">2</span> <span class="token comment"># 缩进大小</span>
end_of_line <span class="token operator">=</span> lf <span class="token comment"># 控制换行类型(lf | cr | crlf)</span>
trim_trailing_whitespace <span class="token operator">=</span> <span class="token boolean">true</span> <span class="token comment"># 去除行首的任意空白字符</span>
insert_final_newline <span class="token operator">=</span> <span class="token boolean">true</span> <span class="token comment"># 始终在文件末尾插入一个新行</span>

<span class="token punctuation">[</span>*.md<span class="token punctuation">]</span> <span class="token comment"># 表示仅 md 文件适用以下规则</span>
max_line_length <span class="token operator">=</span> off
trim_trailing_whitespace <span class="token operator">=</span> <span class="token boolean">false</span>
</code></pre></div><h3 id="prettier"><a href="#prettier" class="header-anchor">#</a> Prettier</h3> <blockquote><p><a href="https://prettier.io/" target="_blank" rel="noopener noreferrer">https://prettier.io/<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote> <ul><li>install</li></ul> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">npm</span> i prettier -D
</code></pre></div><div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">yarn</span> <span class="token function">add</span> -D prettier
</code></pre></div><ul><li><a href="https://prettier.io/docs/en/options.html" target="_blank" rel="noopener noreferrer">配置 .prettierrc<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;printWidth&quot;</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
  <span class="token property">&quot;singleQuote&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token property">&quot;trailingComma&quot;</span><span class="token operator">:</span> <span class="token string">&quot;es5&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;semi&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>格式化</li></ul> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># 格式化所有文件（. 表示所有文件）</span>
npx prettier --write <span class="token builtin class-name">.</span>
</code></pre></div><h3 id="eslint"><a href="#eslint" class="header-anchor">#</a> ESLint</h3> <ul><li>install</li></ul> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">npm</span> i eslint -D <span class="token comment"># npm</span>
<span class="token function">yarn</span> <span class="token function">add</span> -D eslint <span class="token comment"># yarn1</span>
</code></pre></div><ul><li>配置</li></ul> <div class="language-sh extra-class"><pre class="language-sh"><code>npx eslint --init
</code></pre></div><p>执行命令,生成配置</p> <h3 id="prettier-和-eslint-的冲突"><a href="#prettier-和-eslint-的冲突" class="header-anchor">#</a> Prettier 和 ESLint 的冲突</h3> <ul><li>install</li></ul> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">npm</span> i eslint-plugin-prettier eslint-config-prettier -D <span class="token comment"># npm</span>
<span class="token function">yarn</span> <span class="token function">add</span> -D  eslint-plugin-prettier eslint-config-prettier <span class="token comment"># yarn1</span>
</code></pre></div><ul><li>配置</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// .eslintrc.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>
  <span class="token keyword">extends</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">'plugin:vue/essential'</span><span class="token punctuation">,</span>
    <span class="token string">'airbnb-base'</span><span class="token punctuation">,</span>
    <span class="token string">'plugin:prettier/recommended'</span> <span class="token comment">// 添加 prettier 插件</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token operator">...</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>Prettier 配置规则 &gt; ESLint 配置规则</p></blockquote> <p>执行 eslint --fix 命令时，ESLint 就会按照 Prettier 的配置规则来格式化代码</p> <h3 id="husky-lint-staged"><a href="#husky-lint-staged" class="header-anchor">#</a> husky &amp; lint-staged</h3> <blockquote><p><a href="https://typicode.github.io/husky/#/?id=usage" target="_blank" rel="noopener noreferrer">husky<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> —— Git Hook 工具，可以设置在 git 各个阶段（pre-commit、commit-msg、pre-push 等）触发我们的命令。
<a href="https://github.com/okonet/lint-staged" target="_blank" rel="noopener noreferrer">lint-staged<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> —— 在 git 暂存的文件上运行 linters。</p></blockquote> <h4 id="husky-自动配置"><a href="#husky-自动配置" class="header-anchor">#</a> husky 自动配置</h4> <ul><li>初始化</li></ul> <div class="language-sh extra-class"><pre class="language-sh"><code>npx husky-init <span class="token operator">&amp;&amp;</span> <span class="token function">npm</span> <span class="token function">install</span>       <span class="token comment"># npm</span>
npx husky-init <span class="token operator">&amp;&amp;</span> <span class="token function">yarn</span>              <span class="token comment"># Yarn 1</span>
</code></pre></div><ul><li>配置,修改 .husky/pre-commit</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># .husky/pre-commit</span>
eslint --fix ./src --ext .vue,.js,.ts
</code></pre></div><h3 id="lint-staged"><a href="#lint-staged" class="header-anchor">#</a> lint-staged</h3> <ul><li>安装</li></ul> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">npm</span> i lint-staged -D <span class="token comment">#npm</span>
<span class="token function">yarn</span> <span class="token function">add</span> lint-staged -D <span class="token comment">#yarn1</span>
</code></pre></div><ul><li>配置</li></ul> <div class="language-json extra-class"><pre class="language-json"><code><span class="token comment">// package.json 增加</span>
<span class="token property">&quot;lint-staged&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token property">&quot;*.{vue,js,ts}&quot;</span><span class="token operator">:</span> <span class="token string">&quot;eslint --fix&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><ul><li>配置 husky</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 修改 .husky/pre-commit</span>
npx lint-staged
</code></pre></div><h2 id="git-提交规范"><a href="#git-提交规范" class="header-anchor">#</a> Git 提交规范</h2> <h3 id="angular-commit-message-格式规范"><a href="#angular-commit-message-格式规范" class="header-anchor">#</a> Angular commit message 格式规范</h3> <blockquote><p><a href="https://github.com/angular/angular/blob/master/CONTRIBUTING.md#commit" target="_blank" rel="noopener noreferrer">Angular 项目提交信息格式<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote> <p>commit message 由 Header、Body、Footer 组成。</p> <div class="language-txt extra-class"><pre class="language-text"><code>&lt;header&gt;
&lt;BLANK LINE&gt;
&lt;body&gt;
&lt;BLANK LINE&gt;
&lt;footer&gt;
</code></pre></div><ul><li>Header 部分包括三个字段 type（必需）、scope（可选）和 subject（必需）。</li></ul> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token operator">&lt;</span>type<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>scope<span class="token operator">&gt;</span><span class="token punctuation">)</span>: <span class="token operator">&lt;</span>short summary<span class="token operator">&gt;</span>
  │       │             │
  │       │             └─⫸ Summary <span class="token keyword">in</span> present tense. Not capitalized. No period at the end.
  │       │
  │       └─⫸ Commit Scope: <span class="token operator">|</span>common<span class="token operator">|</span>core<span class="token operator">|</span>forms<span class="token operator">|</span>router<span class="token operator">|</span>service-worker<span class="token operator">|</span>changelog<span class="token operator">|</span>docs<span class="token operator">|</span>
  │
  └─⫸ Commit Type: build<span class="token operator">|</span>ci<span class="token operator">|</span>docs<span class="token operator">|</span>feat<span class="token operator">|</span>fix<span class="token operator">|</span>perf<span class="token operator">|</span>refactor<span class="token operator">|</span><span class="token builtin class-name">test</span>
</code></pre></div><ul><li><p>body 是对本次 commit 的详细描述，可以分成多行。（body 可省略）跟 subject 类似，用动词开头，body 应该说明修改的原因和更改前后的行为对比。</p></li> <li><p>footer 是可选的.</p></li></ul> <h3 id="commitizen"><a href="#commitizen" class="header-anchor">#</a> <a href="https://github.com/commitizen/cz-cli" target="_blank" rel="noopener noreferrer">Commitizen<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h3> <blockquote><p>Commitizen 是一个帮助撰写规范 commit message 的工具。它有一个命令行工具 cz-cli。</p></blockquote> <ul><li>安装</li></ul> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">npm</span> <span class="token function">install</span> commitizen -D
<span class="token function">yarn</span> <span class="token function">add</span> -D commitizen
</code></pre></div><ul><li>初始化</li></ul> <div class="language-sh extra-class"><pre class="language-sh"><code>npx commitizen init cz-conventional-changelog --save-dev --save-exact
npx commitizen init cz-conventional-changelog --yarn --dev --exact
</code></pre></div><ul><li>使用 Commitizen</li></ul> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">git</span> cz
</code></pre></div><ul><li>cz-customizable 自定义配置提交说明</li></ul> <div class="language-sh extra-class"><pre class="language-sh"><code>npx commitizen init cz-customizable --save-dev --save-exact --force
</code></pre></div><h3 id="集成-commitlint-验证提交规范"><a href="#集成-commitlint-验证提交规范" class="header-anchor">#</a> 集成 commitlint 验证提交规范</h3> <ul><li>安装</li></ul> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">npm</span> i @commitlint/config-conventional @commitlint/cli -D
<span class="token function">yarn</span> <span class="token function">add</span> -D  @commitlint/config-conventional @commitlint/cli
</code></pre></div><ul><li>配置 commitlint.config.js</li></ul> <div class="language-sh extra-class"><pre class="language-sh"><code>module.exports <span class="token operator">=</span> <span class="token punctuation">{</span> extends: <span class="token punctuation">[</span><span class="token string">'@commitlint/config-conventional'</span><span class="token punctuation">]</span> <span class="token punctuation">}</span>

</code></pre></div><ul><li>使用 husky 的 commit-msg hook 触发验证提交信息的命令</li></ul> <div class="language-sh extra-class"><pre class="language-sh"><code>npx husky <span class="token function">add</span> .husky/commit-msg <span class="token string">&quot;npx --no-install commitlint --edit <span class="token variable">$1</span>&quot;</span>
</code></pre></div><h2 id="vscode"><a href="#vscode" class="header-anchor">#</a> VSCode</h2> <h3 id="jsdoc"><a href="#jsdoc" class="header-anchor">#</a> <a href="https://jsdoc.app/index.html" target="_blank" rel="noopener noreferrer">JSDoc<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//@ts-check</span>

<span class="token comment">/** @type {import('playwright').Page} */</span>
<span class="token keyword">let</span> page<span class="token punctuation">;</span>
</code></pre></div><ul><li><a href="https://jsdoc.app/tags-type.html" target="_blank" rel="noopener noreferrer">@type<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/** @type {(string|Array.)} */</span>
<span class="token keyword">var</span> foo<span class="token punctuation">;</span>
<span class="token comment">/** @const {number} */</span>
<span class="token keyword">var</span> <span class="token constant">FOO</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
</code></pre></div><ul><li><a href="https://jsdoc.app/tags-typedef.html" target="_blank" rel="noopener noreferrer">@typedef<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * A number, or a string containing a number.
 * @typedef {(number|string)} NumberLike
 */</span>

<span class="token comment">/**
 * Set the magic number.
 * @param {NumberLike} x - The magic number.
 */</span>
<span class="token keyword">function</span> <span class="token function">setMagicNumber</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre></div><h2 id="eslint-配置"><a href="#eslint-配置" class="header-anchor">#</a> ESLINT 配置</h2> <h3 id="react-hooks-eslint"><a href="#react-hooks-eslint" class="header-anchor">#</a> React hooks ESlint</h3> <ul><li>安装</li></ul> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">npm</span> <span class="token function">install</span> eslint-plugin-react-hooks --save-dev
<span class="token function">yarn</span> <span class="token function">add</span> -D eslint-plugin-react-hooks
</code></pre></div><ul><li>配置</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 你的 ESLint 配置</span>
<span class="token punctuation">{</span>
  <span class="token string">&quot;plugins&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// ...</span>
    <span class="token string">&quot;react-hooks&quot;</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string">&quot;rules&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
    <span class="token string">&quot;react-hooks/rules-of-hooks&quot;</span><span class="token operator">:</span> <span class="token string">&quot;error&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 检查 Hook 的规则</span>
    <span class="token string">&quot;react-hooks/exhaustive-deps&quot;</span><span class="token operator">:</span> <span class="token string">&quot;warn&quot;</span> <span class="token comment">// 检查 effect 的依赖</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//.eslintrc.js</span>
rules<span class="token operator">:</span><span class="token punctuation">{</span>
  semi<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'error'</span><span class="token punctuation">,</span> <span class="token string">'always'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">//分号</span>
  <span class="token string">'comma-dangle'</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'error'</span><span class="token punctuation">,</span> <span class="token string">'always-multiline'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">//逗号(仅多行)</span>
  <span class="token string">'space-before-function-paren'</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;error&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token string">&quot;anonymous&quot;</span><span class="token operator">:</span> <span class="token string">&quot;always&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;named&quot;</span><span class="token operator">:</span> <span class="token string">&quot;never&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;asyncArrow&quot;</span><span class="token operator">:</span> <span class="token string">&quot;always&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">//方法前空格</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="发布-npm-包"><a href="#发布-npm-包" class="header-anchor">#</a> 发布 NPM 包</h2> <h3 id="登录"><a href="#登录" class="header-anchor">#</a> 登录</h3> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">npm</span> login
</code></pre></div><ul><li>查看账号</li></ul> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">npm</span> <span class="token function">whoami</span>
</code></pre></div><ul><li>版本管理</li></ul> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">npm</span> version patch <span class="token comment"># 升级修订版本号</span>
<span class="token function">npm</span> version minor <span class="token comment"># 升级次版本号</span>
<span class="token function">npm</span> version major <span class="token comment"># 升级主版本号</span>
</code></pre></div><h2 id="nginx"><a href="#nginx" class="header-anchor">#</a> Nginx</h2> <ol><li>静态资源代理</li></ol> <ul><li>基本配置</li></ul> <div class="language-sh extra-class"><pre class="language-sh"><code>server <span class="token punctuation">{</span>
  listen       <span class="token number">8888</span><span class="token punctuation">;</span>        <span class="token comment">#端口</span>
  server_name  localhost<span class="token punctuation">;</span>   <span class="token comment">#服务名</span>
  root  html<span class="token punctuation">;</span>               <span class="token comment">#显示的根索引目录</span>
  autoindex on<span class="token punctuation">;</span>             <span class="token comment">#开启索引功能</span>
  autoindex_exact_size off<span class="token punctuation">;</span> <span class="token comment">#关闭计算文件确切大小（单位bytes），只显示大概大小（单位kb、mb、gb）</span>
  autoindex_localtime on<span class="token punctuation">;</span>   <span class="token comment">#显示本机时间而非GMT时间</span>
<span class="token punctuation">}</span>
docker run <span class="token punctuation">\</span>
--rm <span class="token punctuation">\</span>
--name static <span class="token punctuation">\</span>
-v <span class="token string">&quot;<span class="token environment constant">$PWD</span>/html&quot;</span>:/usr/share/nginx/html <span class="token punctuation">\</span>
-v <span class="token string">&quot;<span class="token environment constant">$PWD</span>/conf&quot;</span>:/etc/nginx
-p <span class="token number">8888</span>:80 <span class="token punctuation">\</span>
-d <span class="token punctuation">\</span>
nginx
</code></pre></div><ul><li>设置密码</li></ul> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>htpasswd 命令是 Apache 的 Web 服务器内置工具，用于创建和更新储存用户名、域和用户基本认证的密码文件。</p></div> <p>htpasswd(选项)(参数)</p> <div class="language-sh extra-class"><pre class="language-sh"><code>-c：创建一个加密文件；
-n：不更新加密文件，只将加密后的用户名密码显示在屏幕上；
-m：默认采用MD5算法对密码进行加密；
-d：采用CRYPT算法对密码进行加密；
-p：不对密码进行进行加密，即明文密码；
-s：采用SHA算法对密码进行加密；
-b：在命令行中一并输入用户名和密码而不是根据提示输入密码；
-D：删除指定的用户。
</code></pre></div><p>实例</p> <div class="language-sh extra-class"><pre class="language-sh"><code>htpasswd -bc passwd.db admin  <span class="token number">123456</span> <span class="token comment">#在目录下生成一个passwd.db文件，用户名admin，密码：123456，默认采用MD5加密方式。</span>
htpasswd -b passwd.db  user <span class="token number">123456</span> <span class="token comment">#在原有密码文件中增加下一个用户</span>
</code></pre></div><p>Nginx 配置</p> <div class="language-sh extra-class"><pre class="language-sh"><code>server <span class="token punctuation">{</span>
  listen  <span class="token number">80</span><span class="token punctuation">;</span>
  server_name  localhost<span class="token punctuation">;</span>
  charset utf-8<span class="token punctuation">;</span>
  root html<span class="token punctuation">;</span>
  location / <span class="token punctuation">{</span>
      autoindex on<span class="token punctuation">;</span> <span class="token comment"># 索引</span>
      autoindex_exact_size on<span class="token punctuation">;</span> <span class="token comment"># 显示文件大小</span>
      autoindex_localtime on<span class="token punctuation">;</span> <span class="token comment"># 显示文件时间</span>
      auth_basic <span class="token string">&quot;请输入用户名密码&quot;</span><span class="token punctuation">;</span>
      auth_basic_user_file /usr/share/nginx/passwd.db<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
docker run <span class="token punctuation">\</span>
--rm <span class="token punctuation">\</span>
--name static <span class="token punctuation">\</span>
-v <span class="token string">&quot;<span class="token environment constant">$PWD</span>/html&quot;</span>:/usr/share/nginx/html <span class="token punctuation">\</span>
-v <span class="token string">&quot;<span class="token environment constant">$PWD</span>/conf&quot;</span>:/etc/nginx <span class="token punctuation">\</span>
-v <span class="token string">&quot;<span class="token environment constant">$PWD</span>/passwd.db&quot;</span>:/usr/share/nginx/passwd.db <span class="token punctuation">\</span>
-p <span class="token number">8888</span>:80 <span class="token punctuation">\</span>
-d <span class="token punctuation">\</span>
nginx
</code></pre></div><ul><li>防盗链<div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>如果服务器的图片被别的网站盗链，将影响服务器的带宽以及访问速度，这时我们就需要设置图片文件或视频文件的防盗链功能。</p></div></li></ul> <p>防盗链功能，简单来说就是你可以直接访问该资源，但是不能将我的资源链接放到你自己的服务器上让别人访问，尤其是图片或视频这种比较大的文件，容易导致服务器响应很慢。</p> <p>要实现防盗链，需要了解 HTTP 协议中的请求头部的 Referer 头域和采用 URL 的格式表示访问当前网页或者文件的源地址。通过该头域的值，我们可以检测到访问目标资源的源地址。这样，如果我们检测到 Referer 头域中的值并不是自己站点内的 URL，就采取组织措施，实现防盗链。需要注意是，由于 Referer 头域中的值可以被更改的，因此该方法不能完全阻止所有盗链行为。
:::</p> <div class="language-sh extra-class"><pre class="language-sh"><code>server <span class="token punctuation">{</span>
  listen  <span class="token number">80</span><span class="token punctuation">;</span>
  server_name  xxx.com<span class="token punctuation">;</span>
  charset utf-8<span class="token punctuation">;</span>
  root /static<span class="token punctuation">;</span>
  <span class="token comment">#location指令用来映射请求到本地文件系统</span>
  location ~*^.+<span class="token punctuation">\</span>.<span class="token punctuation">(</span>gif<span class="token operator">|</span>jpg<span class="token operator">|</span>png<span class="token operator">|</span>jpeg<span class="token punctuation">)</span>$ <span class="token punctuation">{</span>
  expires     30d<span class="token punctuation">;</span>
  valid_referers none blocked  xxx.com<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$invalid_referer</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">#return 403;</span>
      rewrite ^/ http://xxx/403.html<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>Nginx 配置中有一个指令 valid_referers，用来获取 Referer 头域中的值，并且根据该值的情况给 Nginx 全局变量$invalid_referer的值，如果Referer头域中没有符合valid_referers指令配置的值，$invalid_referer 变量将会被赋值为 1。</p></div> <p>valid_referer 指令的语法结构:</p> <div class="language-sh extra-class"><pre class="language-sh"><code>valid_referers none <span class="token operator">|</span> blocked <span class="token operator">|</span> server_names <span class="token operator">|</span> string <span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">;</span>
none 检测Referer头域不存在的请求
blocked 检测Referer头域的值被防火墙或者代理服务器删除或伪装的情况。
这种情况下，该头域的值不以“http://”或者“https：//”开头
server_names 设置一个或多个URL,检测Referer头域的值是否是这些URL中的某个。
</code></pre></div><h2 id="docker"><a href="#docker" class="header-anchor">#</a> Docker</h2> <blockquote><p><a href="http://docs.nigeerhuo.com/docker/" target="_blank" rel="noopener noreferrer">Docker 绿皮书<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote> <h3 id="安装"><a href="#安装" class="header-anchor">#</a> 安装</h3> <ul><li><p><a href="https://docs.docker.com/engine/install/centos/" target="_blank" rel="noopener noreferrer">centos<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></li> <li><p><a href="https://docs.docker.com/engine/install/ubuntu/" target="_blank" rel="noopener noreferrer">ubuntu<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></li></ul> <h3 id="常用命令"><a href="#常用命令" class="header-anchor">#</a> 常用命令</h3> <ol><li>docker images 镜像列表</li></ol> <div class="language-sh extra-class"><pre class="language-sh"><code>docker images <span class="token comment">#镜像列表</span>
-a <span class="token comment">#列出本地所有的镜像（含中间映像层）</span>
-q <span class="token comment">#只显示镜像ID。</span>
--digests <span class="token comment">#显示镜像的摘要信息</span>
--no-trunc <span class="token comment"># 显示完整的镜像信息</span>
</code></pre></div><ol start="2"><li>docker search xx 搜索镜像</li></ol> <div class="language-sh extra-class"><pre class="language-sh"><code>docker search tomcat <span class="token comment"># 搜索tomcat镜像</span>
----filter <span class="token assign-left variable">stars</span><span class="token operator">=</span>num
docker search --filter <span class="token assign-left variable">stars</span><span class="token operator">=</span><span class="token number">30</span> tomcat <span class="token comment"># 搜索start&gt;30的tomcat镜像</span>
</code></pre></div><ol start="3"><li>docker pull image [:TAG]</li></ol> <ol start="4"><li>docker rmi imageID 删除镜像</li></ol> <div class="language-sh extra-class"><pre class="language-sh"><code>docker rmi -f <span class="token variable"><span class="token variable">$(</span>docker images -qa<span class="token variable">)</span></span> <span class="token comment"># 删除全部镜像</span>
</code></pre></div><h3 id="dockerfile"><a href="#dockerfile" class="header-anchor">#</a> Dockerfile</h3> <p>Dockerfile 是用来构建 Docker 镜像的构建文件，是由一系列命令和参数构成的脚本。</p> <h4 id="构建步骤"><a href="#构建步骤" class="header-anchor">#</a> 构建步骤</h4> <ul><li>编写 Dockerfile 文件</li> <li>docker build [-f DockerfilePath] -t imageName:tag .</li></ul> <h4 id="关键字"><a href="#关键字" class="header-anchor">#</a> 关键字</h4> <ul><li>FROM 基础镜像，当前新镜像是基于哪个镜像的</li> <li>MAINTAINER 镜像维护者的姓名和邮箱地址</li> <li>RUN 容器构建时需要运行的命令</li> <li>EXPOSE 当前容器对外暴露出的端口</li> <li>WORKDIR 指定在创建容器后，终端默认登陆的进来工作目录，一个落脚点</li> <li>ENV 用来在构建镜像过程中设置环境变量</li> <li>ADD 将宿主机目录下的文件拷贝进镜像且 ADD 命令会自动处理 URL 和解压 tar 压缩包</li> <li>COPY 将从构建上下文目录中 &lt;源路径&gt; 的文件/目录复制到新的一层的镜像内的 &lt;目标路径&gt; 位置</li> <li>VOLUME 容器数据卷，用于数据保存和持久化工作</li> <li>CMD 指定一个容器启动时要运行的命令 Dockerfile 中可以有多个 CMD 指令，但只有最后一个生效，CMD 会被 docker run 之后的参数替换</li> <li>ENTRYPOINT​ 指定一个容器启动时要运行的命令 ENTRYPOINT 的目的和 CMD 一样，都是在指定容器启动程序及参数</li> <li>ONBUILD 当构建一个被继承的 Dockerfile 时运行命令，父镜像在被子继承后父镜像的 onbuild 被触发</li></ul> <h3 id="网络"><a href="#网络" class="header-anchor">#</a> 网络</h3> <h4 id="docker-容器互访"><a href="#docker-容器互访" class="header-anchor">#</a> <a href="https://www.cnblogs.com/shenh/p/9714547.html" target="_blank" rel="noopener noreferrer">Docker 容器互访<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h4> <h2 id="github-gh-page-action"><a href="#github-gh-page-action" class="header-anchor">#</a> <a href="http://www.ruanyifeng.com/blog/2019/09/getting-started-with-github-actions.html" target="_blank" rel="noopener noreferrer">Github gh-page Action<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h2> <ol><li>react<div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>需要生成需要 GitHub 密钥,存储在 Secrets.ACCESS_TOKEN 中</p></div></li></ol> <div class="language-yml extra-class"><pre class="language-yml"><code><span class="token comment"># .github/workflows/gh-pages.yml</span>
<span class="token key atrule">name</span><span class="token punctuation">:</span> GitHub Page Actions
<span class="token key atrule">on</span><span class="token punctuation">:</span>
  <span class="token key atrule">push</span><span class="token punctuation">:</span>
    <span class="token key atrule">branches</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> master
<span class="token key atrule">jobs</span><span class="token punctuation">:</span>
  <span class="token key atrule">build-and-deploy</span><span class="token punctuation">:</span>
    <span class="token key atrule">runs-on</span><span class="token punctuation">:</span> ubuntu<span class="token punctuation">-</span>latest
    <span class="token key atrule">steps</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Checkout 🛎️
        <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/checkout@v2
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Node
        <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/setup<span class="token punctuation">-</span>node@v2
        <span class="token key atrule">with</span><span class="token punctuation">:</span>
          <span class="token key atrule">node-version</span><span class="token punctuation">:</span> <span class="token string">&quot;16&quot;</span>
          <span class="token key atrule">cache</span><span class="token punctuation">:</span> <span class="token string">&quot;npm&quot;</span> <span class="token comment"># yarn</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Install dependencies and build
        <span class="token key atrule">run</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token scalar string">
          npm install 
          npm run build</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Deploy
        <span class="token key atrule">uses</span><span class="token punctuation">:</span> JamesIves/github<span class="token punctuation">-</span>pages<span class="token punctuation">-</span>deploy<span class="token punctuation">-</span>action@v4
        <span class="token key atrule">with</span><span class="token punctuation">:</span>
          <span class="token key atrule">branch</span><span class="token punctuation">:</span> gh<span class="token punctuation">-</span>pages <span class="token comment"># The branch the action should deploy to.</span>
          <span class="token key atrule">folder</span><span class="token punctuation">:</span> docs/.vuepress/dist <span class="token comment"># The folder the action should deploy.</span>
</code></pre></div><h3 id="github-gh-pages-deploy"><a href="#github-gh-pages-deploy" class="header-anchor">#</a> Github gh-pages deploy</h3> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">yarn</span> <span class="token function">add</span> --dev  gh-pages
</code></pre></div><div class="language-json extra-class"><pre class="language-json"><code><span class="token comment">//package.json  homepage</span>
<span class="token property">&quot;homepage&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://xxx.github.io/project_name/&quot;</span><span class="token punctuation">,</span>
<span class="token comment">//  package.json  scripts +</span>
<span class="token property">&quot;predeploy&quot;</span><span class="token operator">:</span> <span class="token string">&quot;yarn build&quot;</span><span class="token punctuation">,</span>
<span class="token property">&quot;deploy&quot;</span><span class="token operator">:</span> <span class="token string">&quot;gh-pages -d build&quot;</span> <span class="token comment">// build folder</span>
</code></pre></div><div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">yarn</span> deploy
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>build fail 切换下分支再切回去</p></div> <h2 id="shell"><a href="#shell" class="header-anchor">#</a> Shell</h2> <ol><li>定义变量</li></ol> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token assign-left variable">name</span><span class="token operator">=</span><span class="token string">&quot;Joey&quot;</span>
</code></pre></div><ul><li><p>命名只能使用英文字母，数字和下划线，首个字符不能以数字开头。</p></li> <li><p>中间不能有空格，可以使用下划线（_）。</p></li> <li><p>不能使用标点符号。</p></li> <li><p>不能使用 bash 里的关键字（可用 help 命令查看保留关键字）。</p></li></ul> <ol start="2"><li>使用变量</li></ol> <h2 id="模拟数据"><a href="#模拟数据" class="header-anchor">#</a> 模拟数据</h2> <h3 id="mock-js-json-server"><a href="#mock-js-json-server" class="header-anchor">#</a> Mock.js + json-server</h3> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p><a href="http://mockjs.com/" target="_blank" rel="noopener noreferrer">Mock.js<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="https://github.com/typicode/json-server#getting-started" target="_blank" rel="noopener noreferrer">json-server<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></div> <h2 id="nginx-缓存配置"><a href="#nginx-缓存配置" class="header-anchor">#</a> <a href="https://www.digitalocean.com/community/tools/nginx" target="_blank" rel="noopener noreferrer">Nginx 缓存配置<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h2> <h3 id="启用缓存"><a href="#启用缓存" class="header-anchor">#</a> 启用缓存</h3> <div class="language-sh extra-class"><pre class="language-sh"><code>server<span class="token punctuation">{</span>
  <span class="token punctuation">..</span>.
  <span class="token comment"># assets</span>
  location ~* <span class="token punctuation">\</span>.<span class="token punctuation">(</span>?:css<span class="token punctuation">(</span><span class="token punctuation">\</span>.map<span class="token punctuation">)</span>?<span class="token operator">|</span>js<span class="token punctuation">(</span><span class="token punctuation">\</span>.map<span class="token punctuation">)</span>?<span class="token punctuation">)</span>$ <span class="token punctuation">{</span>
    expires 3h<span class="token punctuation">;</span>
    access_log off<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment"># media</span>
  location ~* <span class="token punctuation">\</span>.<span class="token punctuation">(</span>?:jpe?g<span class="token operator">|</span>png<span class="token operator">|</span>gif<span class="token operator">|</span>ico<span class="token operator">|</span>cur<span class="token operator">|</span>heic<span class="token operator">|</span>webp<span class="token operator">|</span>tiff?<span class="token operator">|</span>mp3<span class="token operator">|</span>m4a<span class="token operator">|</span>aac<span class="token operator">|</span>ogg<span class="token operator">|</span>midi?<span class="token operator">|</span>wav<span class="token operator">|</span>mp4<span class="token operator">|</span>mov<span class="token operator">|</span>webm<span class="token operator">|</span>mpe?g<span class="token operator">|</span>avi<span class="token operator">|</span>ogv<span class="token operator">|</span>flv<span class="token operator">|</span>wmv<span class="token punctuation">)</span>$ <span class="token punctuation">{</span>
    expires 7d<span class="token punctuation">;</span>
    access_log off<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment"># svg, fonts</span>
  location ~* <span class="token punctuation">\</span>.<span class="token punctuation">(</span>?:svgz?<span class="token operator">|</span>ttf<span class="token operator">|</span>ttc<span class="token operator">|</span>otf<span class="token operator">|</span>eot<span class="token operator">|</span>woff2?<span class="token punctuation">)</span>$ <span class="token punctuation">{</span>
    add_header Access-Control-Allow-Origin <span class="token string">&quot;*&quot;</span><span class="token punctuation">;</span>
    expires 7d<span class="token punctuation">;</span>
    access_log off<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="禁用缓存"><a href="#禁用缓存" class="header-anchor">#</a> 禁用缓存</h3> <div class="language-sh extra-class"><pre class="language-sh"><code>server<span class="token punctuation">{</span>
  <span class="token punctuation">..</span>.
  location ~ .*<span class="token punctuation">\</span>.<span class="token punctuation">(</span>gif<span class="token operator">|</span>jpg<span class="token operator">|</span>jpeg<span class="token operator">|</span>png<span class="token operator">|</span>bmp<span class="token operator">|</span>swf<span class="token operator">|</span>js<span class="token operator">|</span>css<span class="token punctuation">)</span>$ <span class="token punctuation">{</span>
  <span class="token comment">#禁止缓存，每次都从服务器请求</span>
    add_header Cache-Control no-store<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="springbootapp"><a href="#springbootapp" class="header-anchor">#</a> SpringBootApp</h2> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># 打包</span>
<span class="token builtin class-name">cd</span> 项目跟目录（和pom.xml同级）
mvn clean package
<span class="token comment">## 或者执行下面的命令</span>
<span class="token comment">## 排除测试代码后进行打包</span>
mvn clean package  -Dmaven.test.skip<span class="token operator">=</span>true
<span class="token comment">#  指定端口</span>
java -jar app.jar  --server.port<span class="token operator">=</span><span class="token number">8000</span>
<span class="token comment"># 后台运行</span>
<span class="token function">nohup</span> java -jar XXX.jar <span class="token operator">&amp;</span>
<span class="token comment">#  选择读取不同的配置文件</span>
java -jar app.jar --spring.profiles.active<span class="token operator">=</span>dev
<span class="token comment"># 设置 jvm 参数</span>
java -Xms10m -Xmx80m -jar app.jar <span class="token operator">&amp;</span>
</code></pre></div><h2 id="vercel-proxy"><a href="#vercel-proxy" class="header-anchor">#</a> <a href="https://vercel.com/" target="_blank" rel="noopener noreferrer">vercel<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> proxy</h2> <div class="language-json extra-class"><pre class="language-json"><code><span class="token comment">// vercel.json</span>
<span class="token punctuation">{</span>
  <span class="token property">&quot;rewrites&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;source&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/api/(.*)&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;destination&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/api/proxy&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// /api/proxy.js</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> createProxyMiddleware <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;http-proxy-middleware&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 创建代理对象并转发请求</span>
  <span class="token function">createProxyMiddleware</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    target<span class="token operator">:</span> <span class="token string">&quot;http://example.com/&quot;</span><span class="token punctuation">,</span>
    changeOrigin<span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token comment">// pathRewrite: {</span>
    <span class="token comment">//   // 通过路径重写，去除请求路径中的 `/backend`</span>
    <span class="token comment">//   // 例如 /backend/user/login 将被转发到 http://backend-api.com/user/login</span>
    <span class="token comment">//   '^/api/': '/'</span>
    <span class="token comment">// }</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="robots-txt"><a href="#robots-txt" class="header-anchor">#</a> robots.txt</h2> <p><a href="https://www.robotstxt.org/robotstxt.html" target="_blank" rel="noopener noreferrer">https://www.robotstxt.org/robotstxt.html<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <ul><li>允许所有搜索引擎收录本站</li></ul> <p>robots.txt为空就可以，什么都不要写。</p> <div class="language-text extra-class"><pre class="language-text"><code>User-agent: *
Disallow:
</code></pre></div><ul><li>禁止所有SE收录网站的某些目录：</li></ul> <div class="language-text extra-class"><pre class="language-text"><code>User-agent: *
Disallow: /path1/
Disallow: /path2/
</code></pre></div><ul><li>禁止某个搜索引擎收录本站，例如禁止百度</li></ul> <div class="language-text extra-class"><pre class="language-text"><code>User-agent: Baiduspider
Disallow: /
</code></pre></div><ul><li>禁止所有搜索引擎收录本站</li></ul> <div class="language-text extra-class"><pre class="language-text"><code>User-agent: *
Disallow: /
</code></pre></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">LastUpdated:</span> <span class="time">7/27/2022, 6:46:31 AM</span></div></footer> <!----> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/notebook/assets/js/app.4ef68408.js" defer></script><script src="/notebook/assets/js/2.f546fd41.js" defer></script><script src="/notebook/assets/js/14.3c282a52.js" defer></script><script src="/notebook/assets/js/3.5194bc92.js" defer></script>
  </body>
</html>
